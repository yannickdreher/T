<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:T.ViewModels"
             x:Class="T.Views.HostKeyDialog"
             x:DataType="vm:HostKeyDialogViewModel">

    <StackPanel Spacing="16" MinWidth="500">
        <!-- Warning Icon and Message -->
        <Border Background="{DynamicResource SystemFillColorCautionBackgroundBrush}"
                CornerRadius="8"
                Padding="16">
            <StackPanel Spacing="8">
                <TextBlock Text="⚠️ Host Key Verification"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource SystemFillColorCautionBrush}"/>
                <TextBlock TextWrapping="Wrap"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}">
                    The authenticity of the host cannot be established.
                    This might be the first time you connect to this server, or the server's key has changed.
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- Host Information -->
        <StackPanel Spacing="8">
            <TextBlock Text="Host Details"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
            
            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                  RowSpacing="8" ColumnSpacing="12">
                
                <TextBlock Grid.Row="0" Grid.Column="0"
                           Text="Host:"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                <TextBlock Grid.Row="0" Grid.Column="1"
                           Text="{Binding Host}"
                           FontFamily="Cascadia Code,Consolas,Courier New"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

                <TextBlock Grid.Row="1" Grid.Column="0"
                           Text="Port:"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                <TextBlock Grid.Row="1" Grid.Column="1"
                           Text="{Binding Port}"
                           FontFamily="Cascadia Code,Consolas,Courier New"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

                <TextBlock Grid.Row="2" Grid.Column="0"
                           Text="Key Type:"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                <TextBlock Grid.Row="2" Grid.Column="1"
                           Text="{Binding KeyType}"
                           FontFamily="Cascadia Code,Consolas,Courier New"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>

                <TextBlock Grid.Row="3" Grid.Column="0"
                           Text="SHA256:"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                <SelectableTextBlock Grid.Row="3" Grid.Column="1"
                                     Text="{Binding Fingerprint}"
                                     FontFamily="Cascadia Code,Consolas,Courier New"
                                     FontSize="11"
                                     Foreground="{DynamicResource AccentFillColorDefaultBrush}"/>

                <TextBlock Grid.Row="4" Grid.Column="0"
                           Text="MD5:"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                <SelectableTextBlock Grid.Row="4" Grid.Column="1"
                                     Text="{Binding FingerprintMD5}"
                                     FontFamily="Cascadia Code,Consolas,Courier New"
                                     FontSize="11"
                                     Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
            </Grid>
        </StackPanel>

        <!-- Security Notice -->
        <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="6"
                Padding="12">
            <StackPanel Spacing="8">
                <TextBlock Text="🔒 Security Notice"
                           FontWeight="SemiBold"
                           FontSize="13"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}"/>
                <TextBlock TextWrapping="Wrap"
                           FontSize="12"
                           Foreground="{DynamicResource TextFillColorSecondaryBrush}">
                    Please verify this fingerprint matches the one provided by your server administrator.
                    If you're unsure, contact your administrator before continuing.
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- Auto-save Notice -->
        <Border Background="{DynamicResource AccentFillColorDefaultBrush}"
                Opacity="0.1"
                CornerRadius="6"
                Padding="12">
            <StackPanel Spacing="4" Orientation="Horizontal">
                <TextBlock Text="ℹ️"
                           FontSize="14"
                           VerticalAlignment="Center"/>
                <TextBlock TextWrapping="Wrap"
                           FontSize="12"
                           VerticalAlignment="Center"
                           Foreground="{DynamicResource TextFillColorPrimaryBrush}">
                    If you accept, this key will be automatically saved to ~/.ssh/known_hosts
                </TextBlock>
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>